<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="plone">

  <body>
    <metal:content-title fill-slot="content-title">
      <metal:content-title define-macro="content-title">
      </metal:content-title>
    </metal:content-title>
    <metal:content-description fill-slot="content-description">
      <metal:content-description define-macro="content-description">
      </metal:content-description>
    </metal:content-description>
    <metal:content-core fill-slot="content-core">
      <metal:block define-macro="content-core">
        <metal:block define-macro="tiles-macro">
          <div tal:attributes="class python:canEditTiles and 'editableTiles tilesWrapper' or 'tilesWrapper'"
               i18n:domain="redturtle.tiles.management"
               tal:define="canEditTiles view/canEditTiles">
            <div class="actionsTiles"
                 tal:condition="canEditTiles">
              <a tal:attributes="href string:${context/absolute_url}/@@add-tile"
                 class="plone-btn plone-btn-primary add-tile-btn">
                <tal:label i18n:translate="add_new_tile_label">Add new tile</tal:label>
              </a>
            </div>
            <div class="tilesList"
                 tal:define="tiles view/get_tiles_list;"
                 tal:condition="tiles">
              <tal:tile repeat="tile tiles">
                <div tal:define="tile_hidden python:tile.get('tile_hidden', False);
                                 tile_type python:tile.get('tile_type', '');
                                 tile_id python:tile.get('tile_id', '')"
                     tal:attributes="data-tileid python:canEditTiles and tile_id or '';
                                     data-tiletype python:canEditTiles and tile_type or '';
                                     data-tilehidden python:canEditTiles and tile_hidden or '';
                                     class python:tile_hidden and 'tileWrapper hiddenTile' or 'tileWrapper'"
                     class="tileWrapper">
                  <div class="tileEditButtons" tal:condition="canEditTiles">
                    <a class="plone-btn plone-btn-info tileEditLink"
                       href="${context/absolute_url}/@@edit-tile/${tile_type}/${tile_id}">
                      <span class="icon-edit" aria-hidden="true"></span>
                    </a>
                    <a class="plone-btn plone-btn tileVisibilityLink"
                       href="${context/absolute_url}/@@show_hide_tiles?tileId=${tile_id}">
                      <span tal:condition="tile_hidden" i18n:translate="show_label" aria-hidden="true">Show</span>
                      <span tal:condition="not:tile_hidden" i18n:translate="hide_label" aria-hidden="true">Hide</span>
                    </a>
                    <a class="plone-btn plone-btn-danger tileDeleteLink"
                       href="${context/absolute_url}/@@delete-tile/${tile_type}/${tile_id}">
                      <span class="icon-delete" aria-hidden="true">X</span>
                    </a>
                  </div>
                  <div tal:attributes="data-tile python:view.get_tile_url(tile)" />
                </div>
              </tal:tile>
            </div>
          </div>
        </metal:block>
      </metal:block>
    </metal:content-core>
  </body>
</html>
